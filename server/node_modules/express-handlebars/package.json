{
  "name": "express-handlebars",
  "description": "A Handlebars view engine for Express which doesn't suck.",
  "version": "1.2.1",
  "homepage": "https://github.com/ericf/express-handlebars",
  "keywords": [
    "express",
    "express3",
    "handlebars",
    "view",
    "layout",
    "partials",
    "templates"
  ],
  "author": {
    "name": "Eric Ferraiuolo",
    "email": "eferraiuolo@gmail.com",
    "url": "http://ericf.me/"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/ericf/express-handlebars.git"
  },
  "bugs": {
    "url": "https://github.com/ericf/express-handlebars/issues"
  },
  "engines": {
    "node": ">=0.10"
  },
  "dependencies": {
    "glob": ">=4.0.3 <=4.0.6",
    "graceful-fs": "^3.0.2",
    "handlebars": "^2.0.0",
    "promise": "^6.0.0",
    "semver": "^3.0.1"
  },
  "main": "index.js",
  "directories": {
    "lib": "./lib"
  },
  "readme": "Express Handlebars\n==================\n\nA [Handlebars][] view engine for [Express][] which doesn't suck.\n\n[![npm version](https://img.shields.io/npm/v/express-handlebars.svg?style=flat)][npm]\n[![dependency status](https://img.shields.io/david/ericf/express-handlebars.svg?style=flat)][dep-status]\n\n**This package used to be named `express3-handlebars`. The previous\n`express-handlebars` package by @jneen can be found [here][jneen-exphbs].**\n\n\n[Express]: https://github.com/visionmedia/express\n[Handlebars]: https://github.com/wycats/handlebars.js\n[npm]: https://www.npmjs.org/package/express-handlebars\n[dep-status]: https://david-dm.org/ericf/express-handlebars\n[jneen-exphbs]: https://github.com/jneen/express-handlebars\n\n\n## Goals & Design\n\nI created this project out of frustration with the existing Handlebars view\nengines for Express. As of version 3.x, Express got out of the business of being\na generic view engine — this was a great decision — leaving developers to\nimplement the concepts of layouts, partials, and doing file I/O for their\ntemplate engines of choice.\n\n### Goals and Features\n\nAfter building a half-dozen Express apps, I developed requirements and opinions\nabout what a Handlebars view engine should provide and how it should be\nimplemented. The following is that list:\n\n* Add back the concept of \"layout\", which was removed in Express 3.x.\n\n* Add back the concept of \"partials\" via Handlebars' partials mechanism.\n\n* Support a directories of partials; e.g., `{{> foo/bar}}` which exists on the\n  file system at `views/partials/foo/bar.handlebars`, by default.\n\n* Smart file system I/O and template caching. When in development, templates are\n  always loaded from disk. In production, raw files and compiled templates are\n  cached, including partials.\n\n* All async and non-blocking. File system I/O is slow and servers should not be\n  blocked from handling requests while reading from disk. I/O queuing is used to\n  avoid doing unnecessary work.\n\n* Ability to easily precompiled templates and partials for use on the client,\n  enabling template sharing and reuse.\n\n* Ability to use a different Handlebars module/implementation other than the\n  Handlebars npm package.\n\n### Package Design\n\nThis package was designed to work great for both the simple and complex use\ncases. I _intentionally_ made sure the full implementation is exposed and is\neasily overridable.\n\nThe package exports a function which can be invoked with no arguments or with a\n`config` object and it will return a function (closed over sane defaults) which\ncan be registered with an Express app. It's an engine factory function.\n\nThis exported engine factory has two properties which expose the underlying\nimplementation:\n\n* `ExpressHandlebars()`: The constructor function which holds the internal\n  implementation on its `prototype`. This produces instance objects which store\n  their configuration, `compiled` and `precompiled` templates, and expose an\n  `engine()` function which can be registered with an Express app.\n\n* `create()`: A convenience factory function for creating `ExpressHandlebars`\n  instances.\n\nAn instance-based approach is used so that multiple `ExpressHandlebars`\ninstances can be created with their own configuration, templates, partials, and\nhelpers.\n\n\n## Installation\n\nInstall using npm:\n\n```shell\n$ npm install express-handlebars\n```\n\n\n## Usage\n\nThis view engine uses sane defaults that leverage the \"Express-way\" of\nstructuring an app's views. This makes it trivial to use in basic apps:\n\n### Basic Usage\n\n**Directory Structure:**\n\n```\n.\n├── app.js\n└── views\n    ├── home.handlebars\n    └── layouts\n        └── main.handlebars\n\n2 directories, 3 files\n```\n\n**app.js:**\n\nCreates a super simple Express app which shows the basic way to register a\nHandlebars view engine using this package.\n\n```javascript\nvar express = require('express'),\n    exphbs  = require('express-handlebars');\n\nvar app = express();\n\napp.engine('handlebars', exphbs({defaultLayout: 'main'}));\napp.set('view engine', 'handlebars');\n\napp.get('/', function (req, res) {\n    res.render('home');\n});\n\napp.listen(3000);\n```\n\n**views/layouts/main.handlebars:**\n\nThe main layout is the HTML page wrapper which can be reused for the different\nviews of the app. `{{{body}}}` is used as a placeholder for where the main\ncontent should be rendered.\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>Example App</title>\n</head>\n<body>\n\n    {{{body}}}\n\n</body>\n</html>\n```\n\n**views/home.handlebars:**\n\nThe content for the app's home view which will be rendered into the layout's\n`{{{body}}}`.\n\n```html\n<h1>Example App: Home</h1>\n```\n\n#### Running the Example\n\nThe above example is bundled in this package's [examples directory][], where\nit can be run by:\n\n```shell\n$ cd examples/basic/\n$ npm install\n$ npm start\n```\n\n### Using Instances\n\nAnother way to use this view engine is to create an instance(s) of\n`ExpressHandlebars`, allowing access to the full API:\n\n```javascript\nvar express = require('express'),\n    exphbs  = require('express-handlebars');\n\nvar app = express(),\n    hbs = exphbs.create({ /* config */ });\n\n// Register `hbs.engine` with the Express app.\napp.engine('handlebars', hbs.engine);\napp.set('view engine', 'handlebars');\n\n// ...still have a reference to `hbs`, on which methods like `loadPartials()`\n// can be called.\n```\n\n**Note:** The [Advanced Usage][] example demonstrates how `ExpressHandlebars`\ninstances can be leveraged.\n\n### Template Caching\n\nThis view engine uses a smart template caching strategy. In development,\ntemplates will always be loaded from disk, i.e., no caching. In production, raw\nfiles and compiled Handlebars templates are aggressively cached.\n\nThe easiest way to control template/view caching is through Express'\n[view cache setting][]:\n\n```javascript\napp.enable('view cache');\n```\n\nExpress enables this setting by default when in production mode, i.e.:\n\n```\nprocess.env.NODE_ENV === \"production\"\n```\n\n**Note:** All of the public API methods accept `options.cache`, which gives\ncontrol over caching when calling these methods directly.\n\n### Layouts\n\nA layout is simply a Handlebars template with a `{{{body}}}` placeholder.\nUsually it will be an HTML page wrapper into which views will be rendered.\n\nThis view engine adds back the concept of \"layout\", which was removed in Express\n3.x. It can be configured with a path to the layouts directory, by default it's\nset to `\"views/layouts/\"`.\n\nThere are two ways to set a default layout: configuring the view engine's\n`defaultLayout` property, or setting [Express locals][] `app.locals.layout`.\n\nThe layout into which a view should be rendered can be overridden per-request\nby assigning a different value to the `layout` request local. The following\nwill render the \"home\" view with no layout:\n\n```javascript\napp.get('/', function (req, res, next) {\n    res.render('home', {layout: false});\n});\n```\n\n### Helpers\n\nHelper functions, or \"helpers\" are functions that can be\n[registered with Handlebars][] and can be called within a template. Helpers can\nbe used for transforming output, iterating over data, etc. To keep with the\nspirit of *logic-less* templates, helpers are the place where logic should be\ndefined.\n\nHandlebars ships with some [built-in helpers][], such as: `with`, `if`, `each`,\netc. Most application will need to extend this set of helpers to include\napp-specific logic and transformations. Beyond defining global helpers on\n`Handlebars`, this view engine supports `ExpressHandlebars` instance-level\nhelpers via the `helpers` configuration property, and render-level helpers via\n`options.helpers` when calling the `render()` and `renderView()` methods.\n\nThe following example shows helpers being specified at each level:\n\n**app.js:**\n\nCreates a super simple Express app which shows the basic way to register\n`ExpressHandlebars` instance-level helpers, and override one at the\nrender-level.\n\n```javascript\nvar express = require('express'),\n    exphbs  = require('express-handlebars');\n\nvar app = express();\n\nvar hbs = exphbs.create({\n    // Specify helpers which are only registered on this instance.\n    helpers: {\n        foo: function () { return 'FOO!'; },\n        bar: function () { return 'BAR!'; }\n    }\n});\n\napp.engine('handlebars', hbs.engine);\napp.set('view engine', 'handlebars');\n\napp.get('/', function (req, res, next) {\n    res.render('home', {\n        showTitle: true,\n\n        // Override `foo` helper only for this rendering.\n        helpers: {\n            foo: function () { return 'foo.'; }\n        }\n    });\n});\n\napp.listen(3000);\n```\n\n**views/home.handlebars:**\n\nThe app's home view which uses helper functions to help render the contents.\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>Example App - Home</title>\n</head>\n<body>\n\n    <!-- Uses built-in `if` helper. -->\n  {{#if showTitle}}\n    <h1>Home</h1>\n  {{/if}}\n\n    <!-- Calls `foo` helper, overridden at render-level. -->\n    <p>{{foo}}</p>\n\n    <!-- Calls `bar` helper, defined at instance-level. -->\n    <p>{{bar}}</p>\n\n</body>\n</html>\n```\n\n#### More on Helpers\n\nRefer to the [Handlebars website][] for more information on defining helpers:\n\n* [Expression Helpers][]\n* [Block Helpers][]\n\n\n[examples directory]: https://github.com/ericf/express-handlebars/tree/master/examples\n[view cache setting]: http://expressjs.com/api.html#app-settings\n[Express locals]: http://expressjs.com/api.html#app.locals\n[registered with Handlebars]: https://github.com/wycats/handlebars.js/#registering-helpers\n[built-in helpers]: http://handlebarsjs.com/#builtins\n[Handlebars website]: http://handlebarsjs.com/\n[Expression Helpers]: http://handlebarsjs.com/expressions.html#helpers\n[Block Helpers]: http://handlebarsjs.com/block_helpers.html\n\n\n## API\n\n### Configuration and Defaults\n\nThere are two main ways to use this package: via its engine factory function, or\ncreating `ExpressHandlebars` instances; both use the same configuration\nproperties and defaults.\n\n```javascript\nvar exphbs = require('express-handlebars');\n\n// Using the engine factory:\nexphbs({ /* config */ });\n\n// Create an instance:\nexphbs.create({ /* config */ });\n```\n\nThe following is the list of configuration properties and their default values\n(if any):\n\n#### `defaultLayout`\nThe string name or path of a template in the `layoutsDir` to use as the default\nlayout. This is overridden by a `layout` specified in the app or response\n`locals`. **Note:** A falsy value will render without a layout; e.g.,\n`res.render('home', {layout: false});`.\n\n#### `extname=\".handlebars\"`\nThe string name of the file extension used by the templates. This value should\ncorrespond with the `extname` under which this view engine is registered with\nExpress when calling `app.engine()`.\n\nThe following example sets up an Express app to use `.hbs` as the file extension\nfor views:\n\n```javascript\nvar express = require('express'),\n    exphbs  = require('express-handlebars');\n\nvar app = express();\n\napp.engine('.hbs', exphbs({extname: '.hbs'}));\napp.set('view engine', '.hbs');\n```\n\n**Note:** Setting the app's `\"view engine\"` setting will make that value the\ndefault file extension used for looking up views.\n\n#### `handlebars=require('handlebars')`\nThe Handlebars module/implementation. This allows for the `ExpressHandlebars`\ninstance to use a different Handlebars module/implementation than that provided\nby the Handlebars npm package.\n\n#### `helpers`\nAn object which holds the helper functions used when rendering templates with\nthis `ExpressHandlebars` instance. When rendering a template, a collection of\nhelpers will be generated by merging: `handlebars.helpers` (global), `helpers`\n(instance), and `options.helpers` (render-level). This allows Handlebars'\n`registerHelper()` function to operate as expected, will providing two extra\nlevels over helper overrides.\n\n#### `layoutsDir=\"views/layouts/\"`\nThe string path to the directory where the layout templates reside.\n\n**Note:** If you configure Express to look for views in a custom location (e.g.,\n`app.set('views', 'some/path/')`), you will need to reflect that by passing an\nupdated path as the `layoutsDir` property in your configuration.\n\n#### `partialsDir=\"views/partials/\"`\nThe string path to the directory where the partials templates reside or object\nwith the following properties:\n\n* `dir`: The string path to the directory where the partials templates reside.\n* `namespace`: Optional string namespace to prefix the partial names.\n* `templates`: Optional collection (or promise of a collection) of templates in\n  the form: `{filename: template}`.\n\n**Note:** If you configure Express to look for views in a custom location (e.g.,\n`app.set('views', 'some/path/')`), you will need to reflect that by passing an\nupdated path as the `partialsDir` property in your configuration.\n\n**Note:** Multiple partials dirs can be used by making `partialsDir` an array of\nstrings, and/or config objects as described above. The namespacing feature is\nuseful if multiple partials dirs are used and their file paths might clash.\n\n### Properties\n\nThe public API properties are provided via `ExpressHandlebars` instances. In\nadditional to the properties listed in the **Configuration and Defaults**\nsection, the following are additional public properties:\n\n#### `compiled`\nAn object cache which holds compiled Handlebars template functions in the\nformat: `{\"path/to/template\": [Function]}`.\n\n#### `engine`\nA function reference to the `renderView()` method which is bound to `this`\n`ExpressHandlebars` instance. This bound function should be used when\nregistering this view engine with an Express app.\n\n#### `handlebarsVersion`\nThe version number of `handlebars` as a semver. This is unsed internally to\nbranch on certain operations which differ between Handlebars releases.\n\n#### `precompiled`\nAn object cache which holds precompiled Handlebars template strings in the\nformat: `{\"path/to/template\": [String]}`.\n\n### Methods\n\nThe following is the list of public API methods provided via `ExpressHandlebars`\ninstances:\n\n**Note:** All of the public methods return a [`Promise`][promise] (with the\nexception of `renderView()` which is the interface with Express.)\n\n#### `getPartials([options])`\n\nRetrieves the partials in the `partialsDir` and returns a Promise for an object\nmapping the partials in the form `{name: partial}`.\n\nBy default each partial will be a compiled Handlebars template function. Use\n`options.precompiled` to receive the partials as precompiled templates — this is\nuseful for sharing templates with client code.\n\n**Parameters:**\n\n* `[options]`: Optional object containing any of the following properties:\n\n  * `[cache]`: Whether cached templates can be used if they have already been\n    requested. This is recommended for production to avoid unnecessary file I/O.\n\n  * `[precompiled=false]`: Whether precompiled templates should be provided,\n    instead of compiled Handlebars template functions.\n\nThe name of each partial corresponds to its location in `partialsDir`. For\nexample, consider the following directory structure:\n\n```\nviews\n└── partials\n    ├── foo\n    │   └── bar.handlebars\n    └── title.handlebars\n\n2 directories, 2 files\n```\n\n`getPartials()` would produce the following result:\n\n```javascript\nvar hbs = require('express-handlebars').create();\n\nhbs.getPartials().then(function (partials) {\n    console.log(partials);\n    // => { 'foo/bar': [Function],\n    // =>    title: [Function] }\n});\n```\n\n#### `getTemplate(filePath, [options])`\n\nRetrieves the template at the specified `filePath` and returns a Promise for the\ncompiled Handlebars template function.\n\nUse `options.precompiled` to receive a precompiled Handlebars template.\n\n**Parameters:**\n\n* `filePath`: String path to the Handlebars template file.\n\n* `[options]`: Optional object containing any of the following properties:\n\n  * `[cache]`: Whether a cached template can be used if it have already been\n    requested. This is recommended for production to avoid necessary file I/O.\n\n  * `[precompiled=false]`: Whether a precompiled template should be provided,\n    instead of a compiled Handlebars template function.\n\n#### `getTemplates(dirPath, [options])`\n\nRetrieves the all the templates in the specified `dirPath` and returns a Promise\nfor an object mapping the compiled templates in the form `{filename: template}`.\n\nUse `options.precompiled` to receive precompiled Handlebars templates — this is\nuseful for sharing templates with client code.\n\n**Parameters:**\n\n* `dirPath`: String path to the directory containing Handlebars template files.\n\n* `[options]`: Optional object containing any of the following properties:\n\n  * `[cache]`: Whether cached templates can be used if it have already been\n    requested. This is recommended for production to avoid necessary file I/O.\n\n  * `[precompiled=false]`: Whether precompiled templates should be provided,\n    instead of a compiled Handlebars template function.\n\n#### `render(filePath, context, [options])`\n\nRenders the template at the specified `filePath` with the `context`, using this\ninstance's `helpers` and partials by default, and returns a Promise for the\nresulting string.\n\n**Parameters:**\n\n* `filePath`: String path to the Handlebars template file.\n\n* `context`: Object in which the template will be executed. This contains all of\n  the values to fill into the template.\n\n* `[options]`: Optional object which can contain any of the following properties\n  which affect this view engine's behavior:\n\n  * `[cache]`: Whether a cached template can be used if it have already been\n    requested. This is recommended for production to avoid unnecessary file I/O.\n\n  * `[data]`: Optional object which can contain any data that Handlebars will\n    pipe through the template, all helpers, and all partials. This is a side\n    data channel.\n\n  * `[helpers]`: Render-level helpers that will be used instead of any\n    instance-level helpers; these will be merged with (and will override) any\n    global Handlebars helper functions.\n\n  * `[partials]`: Render-level partials that will be used instead of any\n    instance-level partials. This is used internally as an optimization to avoid\n    re-loading all the partials.\n\n#### `renderView(viewPath, options|callback, [callback])`\n\nRenders the template at the specified `viewPath` as the `{{{body}}}` within the\nlayout specified by the `defaultLayout` or `options.layout`. Rendering will use\nthis instance's `helpers` and partials, and passes the resulting string to the\n`callback`.\n\nThis method is called by Express and is the main entry point into this Express\nview engine implementation. It adds the concept of a \"layout\" and delegates\nrendering to the `render()` method.\n\nThe `options` will be used both as the context in which the Handlebars templates\nare rendered, and to signal this view engine on how it should behave, e.g.,\n`options.cache=false` will load _always_ load the templates from disk.\n\n**Parameters:**\n\n* `viewPath`: String path to the Handlebars template file which should serve as\n  the `{{{body}}}` when using a layout.\n\n* `[options]`: Optional object which will serve as the context in which the\n  Handlebars templates are rendered. It may also contain any of the following\n  properties which affect this view engine's behavior:\n\n  * `[cache]`: Whether cached templates can be used if they have already been\n    requested. This is recommended for production to avoid unnecessary file I/O.\n\n  * `[data]`: Optional object which can contain any data that Handlebars will\n    pipe through the template, all helpers, and all partials. This is a side\n    data channel.\n\n  * `[helpers]`: Render-level helpers that will be merged with (and will\n    override) instance and global helper functions.\n\n  * `[partials]`: Render-level partials will be merged with (and will override)\n    instance and global partials. This should be a `{partialName: fn}` hash or\n    a Promise of an object with this shape.\n\n  * `[layout]`: Optional string path to the Handlebars template file to be used\n    as the \"layout\". This overrides any `defaultLayout` value. Passing a falsy\n    value will render with no layout (even if a `defaultLayout` is defined).\n\n* `callback`: Function to call once the template is retrieved.\n\n### Statics\n\nThe following is the list of static API properties and methods provided on the\n`ExpressHandlebars` constructor:\n\n#### `getHandlebarsSemver(handlebars)`\n\nReturns a semver-compatible version string for the specified `handlebars`\nmodule/implementation.\n\nThis utility function is used to compute the value for an `ExpressHandlebars`\ninstance's `handlebarsVersion` property.\n\n\n[promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n\n\n## Examples\n\n### [Basic Usage][]\n\nThis example shows the most basic way to use this view engine.\n\n### [Advanced Usage][]\n\nThis example is more comprehensive and shows how to use many of the features of\nthis view engine, including helpers, partials, multiple layouts, etc.\n\nAs noted in the **Package Design** section, this view engine's implementation is\ninstance-based, and more advanced usages can take advantage of this. The\nAdvanced Usage example demonstrates how to use an `ExpressHandlebars` instance\nto share templates with the client, among other features.\n\n\n[Basic Usage]: https://github.com/ericf/express-handlebars/tree/master/examples/basic\n[Advanced Usage]: https://github.com/ericf/express-handlebars/tree/master/examples/advanced\n\n\nLicense\n-------\n\nThis software is free to use under the Yahoo! Inc. BSD license.\nSee the [LICENSE file][] for license text and copyright information.\n\n\n[LICENSE file]: https://github.com/ericf/express-handlebars/blob/master/LICENSE\n",
  "readmeFilename": "README.md",
  "_id": "express-handlebars@1.2.1",
  "_from": "express-handlebars@"
}
